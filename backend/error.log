{"level":"error","message":"Error closing Redis connection: The client is closed","service":"whtzup-api","stack":"Error: The client is closed\n    at RedisSocket.quit (/app/node_modules/@redis/client/dist/lib/client/socket.js:70:19)\n    at Commander.QUIT (/app/node_modules/@redis/client/dist/lib/client/index.js:260:71)\n    at process.<anonymous> (/app/server.js:171:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-08-20T09:08:12.606Z"}
{"level":"error","message":"Error closing Redis connection: The client is closed","service":"whtzup-api","stack":"Error: The client is closed\n    at RedisSocket.quit (/app/node_modules/@redis/client/dist/lib/client/socket.js:70:19)\n    at Commander.QUIT (/app/node_modules/@redis/client/dist/lib/client/index.js:260:71)\n    at process.<anonymous> (/app/server.js:171:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-08-20T09:19:48.789Z"}
{"level":"error","message":"Error closing Redis connection: The client is closed","service":"whtzup-api","stack":"Error: The client is closed\n    at RedisSocket.quit (/app/node_modules/@redis/client/dist/lib/client/socket.js:70:19)\n    at Commander.QUIT (/app/node_modules/@redis/client/dist/lib/client/index.js:260:71)\n    at process.<anonymous> (/app/server.js:171:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-08-20T09:53:08.430Z"}
{"level":"error","message":"Error closing Redis connection: The client is closed","service":"whtzup-api","stack":"Error: The client is closed\n    at RedisSocket.quit (/app/node_modules/@redis/client/dist/lib/client/socket.js:70:19)\n    at Commander.QUIT (/app/node_modules/@redis/client/dist/lib/client/index.js:260:71)\n    at process.<anonymous> (/app/server.js:174:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-08-20T09:56:12.829Z"}
{"level":"error","message":"Error closing Redis connection: The client is closed","service":"whtzup-api","stack":"Error: The client is closed\n    at RedisSocket.quit (/app/node_modules/@redis/client/dist/lib/client/socket.js:70:19)\n    at Commander.QUIT (/app/node_modules/@redis/client/dist/lib/client/index.js:260:71)\n    at process.<anonymous> (/app/server.js:174:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-08-20T12:37:32.639Z"}
{"level":"error","message":"Error closing Redis connection: The client is closed","service":"whtzup-api","stack":"Error: The client is closed\n    at RedisSocket.quit (/app/node_modules/@redis/client/dist/lib/client/socket.js:70:19)\n    at Commander.QUIT (/app/node_modules/@redis/client/dist/lib/client/index.js:260:71)\n    at process.<anonymous> (/app/server.js:174:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-08-20T12:42:52.341Z"}
{"level":"error","message":"Error closing Redis connection: The client is closed","service":"whtzup-api","stack":"Error: The client is closed\n    at RedisSocket.quit (/app/node_modules/@redis/client/dist/lib/client/socket.js:70:19)\n    at Commander.QUIT (/app/node_modules/@redis/client/dist/lib/client/index.js:260:71)\n    at process.<anonymous> (/app/server.js:174:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-08-20T13:32:34.080Z"}
{"level":"error","message":"Error closing Redis connection: The client is closed","service":"whtzup-api","stack":"Error: The client is closed\n    at RedisSocket.quit (/app/node_modules/@redis/client/dist/lib/client/socket.js:70:19)\n    at Commander.QUIT (/app/node_modules/@redis/client/dist/lib/client/index.js:260:71)\n    at process.<anonymous> (/app/server.js:174:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-08-20T13:40:57.143Z"}
{"level":"error","message":"Error closing Redis connection: The client is closed","service":"whtzup-api","stack":"Error: The client is closed\n    at RedisSocket.quit (/app/node_modules/@redis/client/dist/lib/client/socket.js:70:19)\n    at Commander.QUIT (/app/node_modules/@redis/client/dist/lib/client/index.js:260:71)\n    at process.<anonymous> (/app/server.js:174:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-08-20T13:43:21.983Z"}
{"level":"error","message":"Error closing Redis connection: The client is closed","service":"whtzup-api","stack":"Error: The client is closed\n    at RedisSocket.quit (/app/node_modules/@redis/client/dist/lib/client/socket.js:70:19)\n    at Commander.QUIT (/app/node_modules/@redis/client/dist/lib/client/index.js:260:71)\n    at process.<anonymous> (/app/server.js:174:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-08-20T16:40:01.117Z"}
{"level":"error","message":"Error closing Redis connection: The client is closed","service":"whtzup-api","stack":"Error: The client is closed\n    at RedisSocket.quit (/app/node_modules/@redis/client/dist/lib/client/socket.js:70:19)\n    at Commander.QUIT (/app/node_modules/@redis/client/dist/lib/client/index.js:260:71)\n    at process.<anonymous> (/app/server.js:174:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-08-20T18:35:29.917Z"}
{"level":"error","message":"Error closing Redis connection: The client is closed","service":"whtzup-api","stack":"Error: The client is closed\n    at RedisSocket.quit (/app/node_modules/@redis/client/dist/lib/client/socket.js:70:19)\n    at Commander.QUIT (/app/node_modules/@redis/client/dist/lib/client/index.js:260:71)\n    at process.<anonymous> (/app/server.js:174:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-08-20T18:55:27.209Z"}
{"code":"42P01","file":"parse_relation.c","length":104,"level":"error","line":"1392","message":"Signup error: relation \"users\" does not exist","name":"error","position":"16","routine":"parserOpenTable","service":"whtzup-api","severity":"ERROR","stack":"error: relation \"users\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async /app/routes/auth.js:89:26","timestamp":"2025-08-20T18:58:44.814Z"}
{"code":"42P01","file":"parse_relation.c","length":104,"level":"error","line":"1392","message":"Signup error: relation \"users\" does not exist","name":"error","position":"16","routine":"parserOpenTable","service":"whtzup-api","severity":"ERROR","stack":"error: relation \"users\" does not exist\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async /app/routes/auth.js:89:26","timestamp":"2025-08-20T18:58:58.439Z"}
{"level":"error","message":"Get profile error: Cannot read properties of undefined (reading 'id')","service":"whtzup-api","stack":"TypeError: Cannot read properties of undefined (reading 'id')\n    at /app/routes/auth.js:360:29\n    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)\n    at next (/app/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/app/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)\n    at /app/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/app/node_modules/express/lib/router/index.js:346:12)\n    at next (/app/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/app/node_modules/express/lib/router/index.js:175:3)\n    at router (/app/node_modules/express/lib/router/index.js:47:12)","timestamp":"2025-08-20T18:59:49.922Z"}
{"code":"23505","constraint":"refresh_tokens_token_key","detail":"Key (token)=(eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI3YWVkM2M3OC1iN2E1LTQ3ZTAtODAwYS1kMWJjNTQ0Yzc0NWUiLCJ0eXBlIjoicmVmcmVzaCIsImlhdCI6MTc1NTcxNjM4OSwiZXhwIjoxNzU2MzIxMTg5fQ.vptlIFdAyNrBSaODqI2QKXNAs4i_oEY19g_Cr99j508) already exists.","file":"nbtinsert.c","length":434,"level":"error","line":"664","message":"Token refresh error: duplicate key value violates unique constraint \"refresh_tokens_token_key\"","name":"error","routine":"_bt_check_unique","schema":"public","service":"whtzup-api","severity":"ERROR","stack":"error: duplicate key value violates unique constraint \"refresh_tokens_token_key\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async /app/routes/auth.js:300:5","table":"refresh_tokens","timestamp":"2025-08-20T18:59:49.935Z"}
{"level":"error","message":"Error closing Redis connection: The client is closed","service":"whtzup-api","stack":"Error: The client is closed\n    at RedisSocket.quit (/app/node_modules/@redis/client/dist/lib/client/socket.js:70:19)\n    at Commander.QUIT (/app/node_modules/@redis/client/dist/lib/client/index.js:260:71)\n    at process.<anonymous> (/app/server.js:176:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-08-20T19:00:49.081Z"}
{"code":"23505","constraint":"refresh_tokens_token_key","detail":"Key (token)=(eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJlZjg4YWE0MS03NDE3LTQ5YmQtYjBmZC1mMjg1ZGEyZGMwZDIiLCJ0eXBlIjoicmVmcmVzaCIsImlhdCI6MTc1NTcxNjU4MCwiZXhwIjoxNzU2MzIxMzgwfQ.ZiziHMZ1VSYd160EBo2-Zq77elXXsZgzacT0NIAIYkk) already exists.","file":"nbtinsert.c","length":434,"level":"error","line":"664","message":"Token refresh error: duplicate key value violates unique constraint \"refresh_tokens_token_key\"","name":"error","routine":"_bt_check_unique","schema":"public","service":"whtzup-api","severity":"ERROR","stack":"error: duplicate key value violates unique constraint \"refresh_tokens_token_key\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async /app/routes/auth.js:301:5","table":"refresh_tokens","timestamp":"2025-08-20T19:03:00.335Z"}
{"code":"23505","constraint":"refresh_tokens_token_key","detail":"Key (token)=(eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJlZjg4YWE0MS03NDE3LTQ5YmQtYjBmZC1mMjg1ZGEyZGMwZDIiLCJ0eXBlIjoicmVmcmVzaCIsImlhdCI6MTc1NTcxNjU4MCwiZXhwIjoxNzU2MzIxMzgwfQ.ZiziHMZ1VSYd160EBo2-Zq77elXXsZgzacT0NIAIYkk) already exists.","file":"nbtinsert.c","length":434,"level":"error","line":"664","message":"Signin error: duplicate key value violates unique constraint \"refresh_tokens_token_key\"","name":"error","routine":"_bt_check_unique","schema":"public","service":"whtzup-api","severity":"ERROR","stack":"error: duplicate key value violates unique constraint \"refresh_tokens_token_key\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async /app/routes/auth.js:208:5","table":"refresh_tokens","timestamp":"2025-08-20T19:03:00.598Z"}
{"level":"error","message":"Error closing Redis connection: The client is closed","service":"whtzup-api","stack":"Error: The client is closed\n    at RedisSocket.quit (/app/node_modules/@redis/client/dist/lib/client/socket.js:70:19)\n    at Commander.QUIT (/app/node_modules/@redis/client/dist/lib/client/index.js:260:71)\n    at process.<anonymous> (/app/server.js:176:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-08-20T19:03:22.009Z"}
{"level":"error","message":"Error closing Redis connection: The client is closed","service":"whtzup-api","stack":"Error: The client is closed\n    at RedisSocket.quit (/app/node_modules/@redis/client/dist/lib/client/socket.js:70:19)\n    at Commander.QUIT (/app/node_modules/@redis/client/dist/lib/client/index.js:260:71)\n    at process.<anonymous> (/app/server.js:176:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-08-20T19:37:39.267Z"}
{"level":"error","message":"Error closing Redis connection: The client is closed","service":"whtzup-api","stack":"Error: The client is closed\n    at RedisSocket.quit (/app/node_modules/@redis/client/dist/lib/client/socket.js:70:19)\n    at Commander.QUIT (/app/node_modules/@redis/client/dist/lib/client/index.js:260:71)\n    at process.<anonymous> (/app/server.js:176:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-08-20T19:59:36.982Z"}
{"level":"error","message":"Error closing Redis connection: The client is closed","service":"whtzup-api","stack":"Error: The client is closed\n    at RedisSocket.quit (/app/node_modules/@redis/client/dist/lib/client/socket.js:70:19)\n    at Commander.QUIT (/app/node_modules/@redis/client/dist/lib/client/index.js:260:71)\n    at process.<anonymous> (/app/server.js:176:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-08-20T20:04:45.907Z"}
{"level":"error","message":"Error closing Redis connection: The client is closed","service":"whtzup-api","stack":"Error: The client is closed\n    at RedisSocket.quit (/app/node_modules/@redis/client/dist/lib/client/socket.js:70:19)\n    at Commander.QUIT (/app/node_modules/@redis/client/dist/lib/client/index.js:260:71)\n    at process.<anonymous> (/app/server.js:176:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-08-21T16:41:17.591Z"}
{"level":"error","message":"Error closing Redis connection: The client is closed","service":"whtzup-api","stack":"Error: The client is closed\n    at RedisSocket.quit (/app/node_modules/@redis/client/dist/lib/client/socket.js:70:19)\n    at Commander.QUIT (/app/node_modules/@redis/client/dist/lib/client/index.js:260:71)\n    at process.<anonymous> (/app/server.js:178:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-08-21T16:46:11.343Z"}
{"level":"error","message":"Error closing Redis connection: The client is closed","service":"whtzup-api","stack":"Error: The client is closed\n    at RedisSocket.quit (/app/node_modules/@redis/client/dist/lib/client/socket.js:70:19)\n    at Commander.QUIT (/app/node_modules/@redis/client/dist/lib/client/index.js:260:71)\n    at process.<anonymous> (/app/server.js:178:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-08-21T17:21:03.537Z"}
{"level":"error","message":"Error closing Redis connection: The client is closed","service":"whtzup-api","stack":"Error: The client is closed\n    at RedisSocket.quit (/app/node_modules/@redis/client/dist/lib/client/socket.js:70:19)\n    at Commander.QUIT (/app/node_modules/@redis/client/dist/lib/client/index.js:260:71)\n    at process.<anonymous> (/app/server.js:178:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-08-21T17:32:50.214Z"}
{"level":"error","message":"Error closing Redis connection: The client is closed","service":"whtzup-api","stack":"Error: The client is closed\n    at RedisSocket.quit (/app/node_modules/@redis/client/dist/lib/client/socket.js:70:19)\n    at Commander.QUIT (/app/node_modules/@redis/client/dist/lib/client/index.js:260:71)\n    at process.<anonymous> (/app/server.js:178:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-08-21T20:22:34.173Z"}
